
node{
         stage(‘Clone Repo’){
git credentialsId: ‘Git-credentials’, url: https//github.com/ashokitschool/maven-web-app.git’
		}

Stage(‘maven build’){
	def mavenHome = tool name: ”Maven-3.8.6”, type: “maven”
        def mavenCMD = “${mavenHome}/bin/mvn”
         sh “${mavenCMD} clean package”
		}
Stage(‘code review’){
	withSonarQubeEnv(‘sonar-server-7.8’){
	def mavenHome = tool name: ”Maven-3.8.6”, type: “maven”
        def mavenCMD = “${mavenHome}/bin/mvn”
         sh “${mavenCMD} sonar:sonar”
}

Stage(‘Upload Build Artifact){
 
// Copy the script from generated syntax policy

}      

 Stage(‘Deploy’) {                    // Sample step = sshagent: SSH Agent

sshagent ([‘Tomcat-Server-agent’]){     

Sh ‘scp -o StrictHostKeyChecking=no /target/01-mavne-wep-app.war  ec2-user@172.01.34.45:/home/ubuntu/apache-tomcat-9.0.65/webapps’
}
}
}